--3.1
CREATE TABLE especialidade(
	codigo    	INT PRIMARY KEY,
	nome		VARCHAR(60) NOT NULL,
	descricao	VARCHAR(500) NOT NULL
);

INSERT INTO especialidade(codigo, nome, descricao) VALUES (1,'Acupuntura','ramo da medicina tradicional chinesa e um método de tratamento chamado complementar de acordo com a nova terminologia da OMS.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (2,'Alergia e Imunologia','diagnóstico e tratamento das doenças alérgicas e do sistema imunológico.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (3,'Anestesiologia','área da Medicina que envolve o tratamento da dor, a hipnose e o manejo intensivo do paciente sob intervenção cirúrgica ou procedimentos.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (4,'Angiologia','é a área da medicina que estuda o tratamento das doenças do aparelho circulatório.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (5,'Cancerologia (oncologia)','é a especialidade que trata dos tumores malignos ou câncer.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (6,'Cardiologia','aborda as doenças relacionadas com o coração e sistema vascular.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (7,'Cirurgia Cardiovascular','tratamento cirúrgico de doenças do coração.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (8,'Cirurgia da Mão','sub-especialidade da Ortopedia que aborda os problemas de saúde relacionados as mãos.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (9,'Cirurgia de cabeça e pescoço','tratamento cirúrgico de doenças da cabeça e do pescoço.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (10,'Cirurgia do Aparelho Digestivo','tratamento clínico e cirúrgico dos órgãos do aparelho digestório, como o esôfago, estômago, intestinos, fígado e vias biliares, e pâncreas.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (11,'Cirurgia Geral','é a área que engloba todas as áreas cirúrgicas, sendo também subdividida.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (12,'Cirurgia Pediátrica','cirurgia geral em crianças.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (13,'Cirurgia Plástica','correção das deformidades, malformações ou lesões que comprometem funções dos órgãos através de cirurgia de caráter reparador ou cirurgias estéticas.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (14,'Cirurgia Torácica','atua na cirurgia da caixa torácica e vias aéreas.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (15,'Cirurgia Vascular','tratamento das veias e artérias, através de cirurgia, procedimentos endovasculares ou tratamentos clínicos.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (16,'Clínica Médica (Medicina interna) ','é a área que engloba todas as áreas não cirúrgicas, sendo subdividida em várias outras especialidades.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (17,'Coloproctologia','é a parte da medicina que estuda e trata os problemas do intestino grosso (cólon), sigmoide e doenças do reto, canal anal e ânus.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (18,'Dermatologia','é o estudo da pele anexos (pelos, glândulas), tratamento e prevenção das as doenças.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (19,'Endocrinologia e Metabologia','é a área da Medicina responsável pelo cuidados aos hormônios, crescimento e glândulas como adrenal, tireoide, hipófise, pâncreas endócrino e outros.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (20,'Endoscopia','Esta especialidade médica ocupa-se do estudo dos mecanismo fisiopatológicos, diagnóstico e tratamento de enfermidades passíveis de abordagem por procedimentos endoscópicos e minimamente invasivos.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (21,'Gastroenterologia','é o estudo, diagnóstico, tratamento e prevenção de doenças relacionadas ao aparelho digestivo, desde erros inatos do metabolismo, doença do trato gastrointestinal, doenças do fígado e cânceres.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (22,'Genética médica','é a área da responsável pelo estudo das doenças genéticas humanas e aconselhamento genético.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (23,'Geriatria','é a subespecialidade médica que cuida dos idosos e articula seu tratamento com outras especialidades.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (24,'Ginecologia e obstetrícia','é a especialidade médica que aborda de forma integral a mulher. Trata desde as doenças infecciosas sexuais, gestação, alterações hormonais, reprodução.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (25,'Hematologia e Hemoterapia','é o estudo dos elementos figurados do sangue (hemácias, leucócitos, plaquetas) e da produção desses elementos nos órgãos hematopoiéticos (medula óssea, baço, linfonódos), além de tratar das anemias, linfomas, leucemias e outros cânceres, hemofilia e doenças da coagulação');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (26,'Homeopatia','é a prática médica baseada na Lei dos Semelhantes. (Considerada pseudociência pela comunidade científica por apresentar provas científicas da sua não-eficácia.) [2] [3] [4] [5] [6] [7] [8]');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (27,'Infectologia','prevenção, diagnóstico e tratamentos de infecções causadas por vírus, bactérias, fungos e parasitas (helmintologia, protozoologia, entomologia e artropodologia).');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (28,'Mastologia','subespecialidade que trata da mama, suas doenças, alterações benignas e estéticas.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (29,'Medicina de Família e Comunidade','é a área da medicina que trata do indivíduo em seu ambiente familiar e comunitário, com foco na prevenção e tratamento das doenças mais comuns, sendo o articulador do encaminhamento aos especialistas quando necessária abordagem mais aprofundada das doenças.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (30,'Medicina do Trabalho','trata do processo de trabalho e da relação deste com as doenças. Atua desde a prevenção dos agravos, a minimização dos efeitos destes e do tratamento das doenças do trabalho quando já estabelecidas.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (31,'Medicina do Tráfego','manutenção da saúde no indivíduo que se desloca, qualquer que seja o meio, cuidando das interações deste deslocamento com o indivíduo.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (32,'Medicina Esportiva','abordagem do atleta de uma forma global, desde a fisiologia do exercício à prevenção de lesões, passando pelo controle de treino e resolução de problemas de saúde que envolvam o praticante do exercício físico.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (33,'Medicina Física e Reabilitação','diagnóstico e terapêutica de diferentes entidades tais como doenças traumáticas, do sistema nervoso central e periférico, orto-traumatológica, cardiorrespiratória.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (34,'Medicina Intensiva','é o ramo da medicina que se ocupa dos cuidados dos doentes graves ou instáveis, que emprega maior número de recursos tecnológicos e humanos no tratamento de doenças ou complicações de doenças, congregando conhecimento da maioria das especialidades médicas e outras áreas de saúde.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (35,'Medicina Legal e Perícia Médica (ou medicina forense)','é a especialidade que aplica os conhecimentos médicos aos interesses da Justiça, na elaboração de leis e na adequada caracterização dos fenômenos biológicos que possam interessar às autoridades no sentido da aplicação das leis. Assim a Medicina Legal caracteriza a lesão corporal, a morte (sua causa, o momento em que ocorreu, que agente a produziu), a embriaguez pelo álcool ou pelas demais drogas, a violência sexual de qualquer natureza, etc.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (36,'Medicina Nuclear','é o estudo imaginológico ou terapia pelo uso de radiofármacos.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (37,'Medicina Preventiva e Social','se dedica especificamente à prevenção de doenças gerais (de várias áreas), porém não unicamente, já que cada área ou especialidade está também capacitada para tal.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (38,'Nefrologia','é a parte da medicina que estuda e trata clinicamente as doenças do rim, como insuficiência renal.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (39,'Neurocirurgia','atua no tratamento de doenças do sistema nervoso central e periférico passíveis de abordagem cirúrgica.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (40,'Neurologia','é a parte da medicina que estuda e trata o sistema nervoso.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (41,'Nutrologia','diagnóstico, prevenção e tratamento de doenças do comportamento alimentar.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (42,'Obstetrícia','é a área da medicina atrelada à Ginecologia que cuida das mulheres em relação ao processo da gestação (pré, pós-parto, puerpério, gestação e outros).');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (43,'Oftalmologia','é a parte da medicina que estuda e trata os distúrbios dos olhos.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (44,'Ortopedia e Traumatologia','é a parte da medicina que estuda e trata as doenças do sistema osteomuscular, locomoção, crescimento, deformidades e as fraturas.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (45,'Otorrinolaringologia','é a parte da medicina que estuda e trata as doenças da orelha, nariz, seios paranasais, faringe e laringe.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (46,'Patologia','é o estudo das doenças em geral sob aspectos determinados. Ela envolve tanto a ciência básica quanto a prática clínica.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (47,'Patologia Clínica/Medicina laboratorial','no Brasil, de forma geral é uma especialidade médica investigativa e atua como parte do processo diagnóstico das doenças.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (48,'Pediatria','é a parte da medicina que estuda e trata crianças.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (49,'Pneumologia','é a parte da medicina que estuda e trata o sistema respiratório.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (50,'Psiquiatria','é a parte da medicina que previne e trata ao transtornos mentais e comportamentais.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (51,'Radiologia e Diagnóstico por Imagem','realização e interpretação de exames de imagem como raio-X, ultrassonografia, Doppler colorido, Tomografia Computadorizada, Ressonância Magnética, entre outros.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (52,'Radioterapia','tratamento empregado em doenças várias, com o uso de raio X ou outra forma de energia radiante.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (53,'Reumatologia','é a especialidade médica que trata das doenças do tecido conjuntivo, articulações e doenças autoimunes. Diferente do senso comum o reumatologista não trata somente reumatismo.');
INSERT INTO especialidade(codigo, nome, descricao) VALUES (54,'Urologia','é a parte da medicina que estuda e trata cirurgicamente e clinicamente os problemas do sistema urinário e do sistema reprodutor masculino e feminino.');


--3.2
CREATE TABLE Convenio(
		nrRegistro		INT PRIMARY KEY, 
		nome			VARCHAR(45) NOT NULL, 
		estado_sede		VARCHAR(40)
);

INSERT INTO convenio(nrRegistro, nome, estado_sede) VALUES (99, 'Particular', NULL),
					(100501, 'Unimed', 'Sao Paulo'),
					(100502, 'ALLIANZ SAÚDE','Mato Grosso'),
					(100503, 'BIOVIDA SAÚDE LTDA','Amazonas'),
					(100504, 'PLAMED PLANO DE ASSISTÊNCIA MÉDICA LTDA','Bahia'),
					(100505, 'PRONTOMED ASSISTÊNCIA MÉDICA LTDA','Acre'),
					(100506, 'SAÚDE MEDICOL S/A','Goias'),
					(100507, 'SOSAUDE ASSISTÊNCIA MÉDICO HOSPITALAR LTDA','Tocantins'),
					(100508, 'TEMPO SAÚDE SEGURADORA S.A.', 'Rio Grande do Sul'),
					(100509, 'VIVA PLANOS DE SAÚDE LTDA','Goias'),
					(100510, 'GOLDEN CROSS','Minas Gerais'),
					(100511, 'UNIVIDA','Goias'),
					(100512, 'AMIL SAUDE','Goias'),
					(100513, 'BRADESCO SAUDE','Maranhao'),
					(100514, 'HEALTH SANTARIS','Rio de Janeiro'),
					(100515, 'NEXT SAÚDE','Sao Paulo'),
					(100516, 'PORTO SEGURO SAÚDE','Brasília'),
					(100517, 'SUL AMÉRICA SAÚDE','Parana');


					--4.1				
ALTER TABLE medico
			ADD COLUMN codigo   INT;
ALTER TABLE medico
			ADD CONSTRAINT fkEspecialidadeMedico FOREIGN KEY (codigo) REFERENCES especialidade(codigo);
			
UPDATE medico SET codigo = 3 + CEIL(RANDOM()*45);


--4.2
ALTER TABLE consulta
			ADD COLUMN nrRegistro  INT;
					
ALTER TABLE consulta
			ADD CONSTRAINT fkConvenioConsulta FOREIGN KEY (nrRegistro) REFERENCES convenio(nrRegistro);
			
UPDATE consulta 
		SET nrRegistro = 99
		WHERE num BETWEEN 1000 AND 11000
			  AND (num % 37) = 0;
			  
UPDATE consulta
		SET nrRegistro = 100500 + ceil(random()*13)
		WHERE NOT (num BETWEEN 1000 AND 11000 AND (num % 37) = 0);
		
--4.3
ALTER TABLE consulta
		ADD COLUMN valor NUMERIC(8,2);
		
UPDATE consulta 
		SET valor = 100 + RANDOM()*150;




